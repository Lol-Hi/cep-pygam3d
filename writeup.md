The following write-up documents mine (Gerrard) and Luck Heng's process in developing this game.

After reading this, you can view the videos to see what our words look like in action.

Our github page is at the bottom.



Foremost, our game is not a complete product. Why is this so?

When we first met up to discuss our project, we thought of an idea for a game. The game would involve a person in a terror attack in a building. He would have to exercise the "Run, Hide, Tell" protocol, teaching the player about it. He would have to run from the terrorists, find places to hide and tell the police. We wanted to build the game in pseudo-3d (or 2.5D) to give ourselves a challenge for our final project. To do this, we decided to split our game in two parts. A 2D engine that did all the calculations (eg where the objects are, collision detection, audio/visual cues) and a 3D engine that would take coordinates from the 2D engine (the 2D engine passes the 3D engine sprites that are within the player's field of vision (shown in our previous commits)) and render them on the screen. Luck Heng focused on the former while I the latter, each helping the other in some parts along the way. We also met up often to discuss our project and work on it together.



Here are a list of features we planned to implement: 3d rendering, different models, mapmaker + reader, audio cues, visual cues, shooting, civilians, calling, multiple levels. 

Firstly, on the maps. We realised that our maps would be very large in size to be fun for the player. As such, creating them by hand was out of the question. As such, we created a map-maker (also in pygame) to create maps. It would be a highly customizable mapmaker for the developers (us) to work on maps. It consisted of a grid, representing each unit square of the map and a paintbox, allowing the creator to choose what color to fill each square with. After that, the mapreader (implemented in our games) could be programmed to read the output of the mapmaker and have the different colours correspond to different sprite types in the game. This would also allow us to easily create multiple levels of the game.

Controls (mapmaker): 1234 to change colour; Left-click to paint (or erase if already painted); Left-click drag to paint large areas



Secondly, on the cues. Luck Heng and I thought about this for quite long. We considered using audio cues (footsteps, gunshots, shouts) and visual cues (radar, bloodstains, footprints, arrow). For the former, audio cues would identify how close the terrorists were and their direction from the player, alerting him to them. We used some mathematics to model how the sound would travel to the right and the left ear, and the amplitude of the sound effect to accurately model how someone might hear the sound (implemented in our older commits). We did not want to use the latter as we found it to be quite unrealistic. We still ended up using it as we faced problems with audio functionality in pygame. Bloodstains and footprints would show where terrorists recently were, while radar and arrows would show terrorists' location on the screen.



Thirdly, on shooting, civilians and calling. We programmed the terrorists to fire lethal bullets, and for civilians to be running around haphazardly the building, to better simulate an actual event. While calling the police, the player would also be immobile for 10 seconds.



Fourthly, on 3D rendering and different models. Pygame does not have in-built functionality to support 3D rendering. As such, we had to build our own system. We learnt linear algebra (vectors, matrices and linear transformations) to better build our engine. In the end, we managed to model the pseudo-3D element quite realistically. We planned to have different models for different sprites - a wall would be a long flat cuboid, while a human would be a cube (the head) on top of three cuboids (one for the body, two for the arms) and two longer cuboids (the legs). This was all supported by our 3D engine's rendering capabilities. However, we did not implement the human model as we did not manage to fix the problems generated by the wall model.



# Why it failed

Poor planning

===========

As cliche as it sounds, although we thought we planned our program out quite in-depth, we realised that we did not think of all the details of how the 2D and the 3D engine would fit together. As such, we struggled with putting the pieces together after completing our parts individually. In addition, while we started on the project extremely early, the EYEs put a halt to our progress and left us with little time remaining.



Poor git usage

============

Poor github usage meant that our progress sometimes wasn't merged together. This was terrible news, considering our project was not as basic as a series of webpages, but rather many different scripts, each with many different functionalities. When we were both working on the scripts at the same time, we both changed different parts of it, and merge conflicts were a nightmare to resolve.



Poor testing

==========

Before putting our parts together, we failed to ensure that our parts were perfect. There were still many bugs that we could have ironed out, had we tested our scripts more thoroughly. The end result when integrating both parts together was horrendous, as bugs on both sides shone through and we struggled to fix all of them.



# Takeaways

Apart from learning from our mistakes about why the project failed (the three factors above), there are other things we got out of the experience.

We learnt how to work in a team. This is one of the few experiences we have had programming with another coder. This invaluable experience taught us the importance of communication and sharing readable code. We also had to plan together and make sure both parties knew what was going on at all times.

We learnt a lot of mathematics. The math behind 2D/3D rendering, collision detection, audio transformations, 3D rotations etc involved a lot of trigonometry, light diffusion (close objects are brighter than further ones, implemented in the game) and linear algebra. While we were not very experienced in these fields before the project, the project has given us an opportunity to spark our interests in these areas.

We experienced game design. Personally, being a game designer has always been a dream of mine. Seeing how all the parts worked together in an engine I created was always something I envisioned. This project has allow both Luck Heng and I to experience what it would be like to be a game designer and let us understand some of the challenges and struggles they might face. This time-consuming process has imparted much invaluable knowledge to us regarding game development.

We learnt not to bite off more than we could chew. The task we had was an ambitious one, maybe too ambitious in hindsight. In the future, we will set more realistic goals, and if we do have such lofty ambitions, serious plans must be made to achieve them.



# What's next

While our game is incomplete (and honestly, unplayable) in this state, we hope to continue working on it, iron out the bugs and polish it up so that it is a finished product (hopefully in the December holidays). We have poured many hours into this project and are unwilling to give up so easily. We plan to use this as a stepping stone to tackle similar projects in the future.



Thanks for reading our write-up!

Github: <https://github.com/Lol-Hi/cep-pygam3d/>

